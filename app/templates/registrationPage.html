<div class="feedback-background" ng-class="{'show-feedback-background': modalVisible}"></div>

<div class="feedback-frame">
    <div class="feedback" ng-class="{'show-feedback': modalVisible && (successfulReg || unsuccessfulReg)}">
        <div><span ng-show="successfulReg">Congratulations!</span><span ng-show="unsuccessfulReg">We are sorry!</span>
            <button class="btn btn-default" type="button" ng-click="redirection()">&times;</button>
        </div>
        <div><p ng-show="successfulReg">Registration was succesful.</p>
            <p ng-show="unsuccessfulReg">The email address you specified is already in use. (Do you already
                have an
                account?)</p></div>
        <div>
            <button class="btn btn-default" type="button" ng-click="redirection()">Close</button>
        </div>
    </div>
</div>

<div id="registration" class="form-style col-md-4 col-md-offset-4 col-sm-8 col-sm-offset-2 col-xs-12">
    <h1>Registration</h1>
    <form name="regForm" ng-submit="register(newCustomer)" novalidate>
        <div class="form-group has-feedback"
             ng-class="{ 'has-success': regForm.name.$touched && regForm.name.$valid, 'has-error': regForm.name.$touched && regForm.name.$invalid }">
            <label>Name:</label>
            <input type="text" class="form-control" name="name" placeholder="Enter your name"
                   ng-model="newCustomer.name" required>
            <span ng-show="regForm.name.$touched && regForm.name.$valid"
                  class="glyphicon glyphicon-ok form-control-feedback"></span>
            <span
                ng-show="regForm.name.$touched && regForm.name.$error.required"
                class="glyphicon glyphicon-remove form-control-feedback"></span>
            <div ng-show="regForm.name.$touched">
                <p class="warn" ng-show="regForm.name.$error.required">Tell us your name.</p>
            </div>
        </div>

        <div class="form-group has-feedback"
             ng-class="{ 'has-success': regForm.email.$touched && regForm.email.$valid, 'has-error': regForm.email.$touched && regForm.email.$invalid }">
            <label>Email:</label>
            <input type="email" class="form-control" name="email" placeholder="Enter your email"
                   ng-model="newCustomer.email" required>
            <span ng-show="regForm.email.$touched && regForm.email.$valid"
                  class="glyphicon glyphicon-ok form-control-feedback"></span>
            <span
                ng-show="regForm.email.$touched && regForm.email.$error.email || regForm.email.$touched && regForm.email.$error.required"
                class="glyphicon glyphicon-remove form-control-feedback"></span>
            <div ng-show="regForm.email.$touched">
                <p class="warn" ng-show="regForm.email.$error.required">Tell us your email.</p>
                <p class="warn" ng-show="regForm.email.$error.email">This is not a valid email.</p>
            </div>
        </div>

        <div class="form-group has-feedback"
             ng-class="{ 'has-success': regForm.pwd.$touched && regForm.pwd.$valid, 'has-error': regForm.pwd.$touched && regForm.pwd.$invalid }">
            <label>Password:</label>
            <input type="password" ng-minlength="8" class="form-control" name="pwd"
                   placeholder="Enter password (at least 8 characters)"
                   ng-model="newCustomer.password" required>
            <span ng-show="regForm.pwd.$touched && regForm.pwd.$valid"
                  class="glyphicon glyphicon-ok form-control-feedback"></span>
            <span
                ng-show="regForm.pwd.$touched && regForm.pwd.$invalid || regForm.pwd.$touched && regForm.pwd.$error.required"
                class="glyphicon glyphicon-remove form-control-feedback"></span>
            <div ng-show="regForm.pwd.$touched">
                <p class="warn" ng-show="regForm.pwd.$error.required">Tell us your password.</p>
                <p class="warn" ng-show="regForm.pwd.$invalid && regForm.pwd.$dirty && !regForm.pwd.$error.required">
                    Password must be at least 8 characters.
                </p>
            </div>
        </div>

        <div class="form-group has-feedback"
             ng-class="{ 'has-success': regForm.repwd.$touched && regForm.repwd.$valid && regForm.pwd.$valid, 'has-error': regForm.repwd.$touched && regForm.repwd.$invalid }">
            <label>Confirm password:</label>
            <input type="password" ng-minlength="8" class="form-control" name="repwd" placeholder="Enter password again"
                   ng-model="repassword" password-match="newCustomer.password" required>
            <span ng-show="regForm.repwd.$touched && regForm.repwd.$valid && regForm.pwd.$valid"
                  class="glyphicon glyphicon-ok form-control-feedback"></span>
            <span
                ng-show="regForm.repwd.$touched && regForm.repwd.$invalid || regForm.repwd.$touched && regForm.repwd.$error.required"
                class="glyphicon glyphicon-remove form-control-feedback"></span>
            <div ng-show="regForm.$submitted || regForm.repwd.$touched">
                <p class="warn" ng-show="regForm.repwd.$error.required">Tell us your password again.</p>
                <p class="warn"
                   ng-show="regForm.repwd.$invalid && regForm.repwd.$dirty && !regForm.repwd.$error.required && regForm.pwd.$valid">
                    Password does not match the Confirm password.
                </p>
            </div>
        </div>

        <button id="regButton" type="submit"
                ng-disabled="regForm.name.$invalid || regForm.email.$invalid || regForm.pwd.$invalid"
                class="btn btn-primary" ng-click="showModal()">Register
        </button>
    </form>
    <p>By creating an account, you agree to Webshop's Conditions of Use and Privacy Notice.</p>
    <p>Already have an account? <a href="#/login">Sign in</a></p>
</div>
